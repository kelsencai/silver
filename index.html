<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ç™½é“¶ç›‘æµ‹ - 2026æˆ˜ç•¥å†³ç­–ç³»ç»Ÿ V4.0</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --danger: #e74c3c; --warning: #f1c40f; --safe: #2ecc71; --dark: #2c3e50; --accent: #3498db; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #f4f7f9; margin: 0; padding: 20px; line-height: 1.6; }
        .container { max-width: 1300px; margin: auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        
        /* å¯¼èˆªä¸å®æ—¶æ•°æ® */
        .nav-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin: 20px 0; }
        .nav-card { background: #fff; border: 1px solid #ddd; padding: 15px; border-radius: 10px; text-align: center; }
        .nav-card a { text-decoration: none; color: var(--accent); font-weight: bold; font-size: 13px; display: block; margin-bottom: 5px; }
        .nav-card input { width: 90%; padding: 5px; border: 1px solid #ccc; border-radius: 5px; text-align: center; }

        /* ç»“æœå±•ç¤º */
        .result-box { display: flex; justify-content: space-around; margin: 25px 0; background: var(--dark); color: white; padding: 25px; border-radius: 10px; }
        .res-item { text-align: center; flex: 1; }
        .res-val { font-size: 28px; font-weight: bold; cursor: help; text-decoration: underline dotted; color: #fff; }
        .res-predict { margin-top: 8px; font-size: 15px; font-weight: bold; }

        /* å›¾è¡¨ */
        .chart-container { width: 100%; height: 350px; margin: 20px 0; }

        /* æ•°æ®å¯¼å…¥ */
        .import-section { background: #f8f9fa; padding: 20px; border-radius: 10px; border: 1px dashed #bbb; margin-top: 20px; }
        textarea { width: 100%; height: 80px; margin: 10px 0; padding: 10px; border-radius: 5px; border: 1px solid #ccc; box-sizing: border-box; }
        
        /* å†å²è¡¨æ ¼ */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; }
        th, td { padding: 12px; border: 1px solid #eee; text-align: center; font-size: 14px; }
        th { background: #f1f2f6; }
        .status-tag { padding: 4px 10px; border-radius: 4px; font-weight: bold; color: white; font-size: 12px; }

        /* --- æ–°å¢æ¿å—æ ·å¼ --- */
        .new-section { margin-top: 40px; padding: 30px; border-radius: 12px; border: 2px solid #eee; }
        .contradiction-box { background: #fff5f5; border-left: 10px solid var(--danger); }
        .secret-box { background: #f0f7ff; border-left: 10px solid var(--accent); }
        .highlight { color: var(--danger); font-weight: bold; }
        .formula-card { background: white; padding: 15px; border-radius: 8px; border: 1px solid #d6e4f0; margin: 10px 0; }
        code { background: #eee; padding: 2px 5px; border-radius: 4px; font-family: monospace; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸŒªï¸ ç™½é“¶ç›‘æµ‹æˆ˜æƒ…å®¤ V4.0</h1>

    <div class="nav-grid">
        <div class="nav-card">
            <a href="https://www.kitco.com/charts/silver" target="_blank">ç°è´§ (Spot) ğŸ”—</a>
            <input type="number" id="spot" value="81.5" oninput="runUpdate()">
        </div>
        <div class="nav-card">
            <a href="https://www.cmegroup.com/markets/metals/precious/silver.html" target="_blank">æœŸè´§ (SI) ğŸ”—</a>
            <input type="number" id="future" value="80.98" oninput="runUpdate()">
        </div>
        <div class="nav-card">
            <a href="https://www.kitco.com/charts/silver-lease-rates" target="_blank">ç§Ÿèµç‡ (%) ğŸ”—</a>
            <input type="number" id="lease" value="6.8" oninput="runUpdate()">
        </div>
        <div class="nav-card">
            <a href="https://www.lbma.org.uk/prices-and-data/london-vault-data" target="_blank">LBMAåº“å­˜(M) ğŸ”—</a>
            <input type="number" id="lbma" value="1185" oninput="runUpdate()">
        </div>
        <div class="nav-card">
            <a href="https://www.ishares.com/us/products/239855/ishares-silver-trust-fund" target="_blank">SLVæŒä»“(M) ğŸ”—</a>
            <input type="number" id="etf" value="506" oninput="runUpdate()">
        </div>
    </div>

    <div class="result-box">
        <div class="res-item">
            <div class="label">æœŸç°ä»·å·® (Basis)</div>
            <div id="res-spread" class="res-val" title="å…¬å¼ï¼šç°è´§ - æœŸè´§ã€‚æ­£å€¼è¡¨ç¤ºç°è´§æ›´è´µï¼Œå®ç‰©æåº¦ç´§ç¼ºã€‚">--</div>
            <div id="pre-spread" class="res-predict">--</div>
        </div>
        <div class="res-item">
            <div class="label">æŒ¤å…‘å‹åŠ›æ¯” (SR)</div>
            <div id="res-ratio" class="res-val" title="å…¬å¼ï¼š((LBMA-ETF)*0.4) / 2.7ã€‚åæ˜ è‡ªç”±ç™½é“¶å¯¹æ—¥å‡æ”¯ä»˜é‡çš„è¦†ç›–ç‡ã€‚">--</div>
            <div id="pre-ratio" class="res-predict">--</div>
        </div>
        <div class="res-item">
            <div class="label">ç§Ÿèµåˆ©ç‡é¢„åˆ¤</div>
            <div id="res-lease-status" class="res-val" title="åæ˜ ç©ºå¤´å€Ÿä¸åˆ°è´§çš„æˆæœ¬ã€‚è·³æ¶¨å³æ˜¯é£æš´ä¿¡å·ã€‚">--</div>
            <div id="pre-lease" class="res-predict">--</div>
        </div>
    </div>

    <div class="chart-container">
        <canvas id="silverChart"></canvas>
    </div>

    <div class="import-section">
        <h3>ğŸ“‚ å†å²æ•°æ®åŒæ­¥</h3>
        <textarea id="raw-input" placeholder="ç²˜è´´Pythonæ•°æ®..."></textarea>
        <button onclick="importData()" style="padding:10px 20px; background:var(--dark); color:white; border:none; border-radius:5px; cursor:pointer;">è§£æå¹¶æ›´æ–°è¶‹åŠ¿</button>
    </div>

    <table>
        <thead>
            <tr><th>æ—¥æœŸ</th><th>ç°è´§ä»·æ ¼</th><th>å‹åŠ›æ¯”</th><th>ç§Ÿèµç‡</th><th>ç³»ç»ŸçŠ¶æ€</th></tr>
        </thead>
        <tbody id="history-body"></tbody>
    </table>

    <hr style="margin: 40px 0; border: 0; border-top: 1px solid #eee;">

    <div class="new-section contradiction-box">
        <h2>ğŸ¯ æŠ“ä¸»è¦çŸ›ç›¾ï¼šå¦‚æœåªçœ‹ä¸€ä¸ªæŒ‡æ ‡ï¼Œçœ‹å“ªä¸ªï¼Ÿ</h2>
        <p>æ ¹æ®é™„ä»¶å¤ç›˜ï¼Œç™½é“¶å¸‚åœºçš„ç»ˆæä¸»è¦çŸ›ç›¾æ˜¯ï¼š<span class="highlight">éš”å¤œç§Ÿèµåˆ©ç‡ (T/N Lease Rate)</span>ã€‚</p>
        <ul>
            <li><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong> ç§Ÿèµåˆ©ç‡æ˜¯ç™½é“¶å¸‚åœºçš„â€œä½“æ¸©è®¡â€ã€‚ä»·æ ¼å¯ä»¥è¢«çº¸é¢åˆçº¦æ“çºµï¼Œä½†ç§Ÿèµåˆ©ç‡åæ˜ çš„æ˜¯å¤§è¡Œä¹‹é—´**â€œå€Ÿä¸å€Ÿå¾—åˆ°å®ç‰©â€**çš„çœŸå®çª˜å¢ƒã€‚</li>
            <li><strong>å¦‚ä½•åˆ¤å®šï¼š</strong>
                <ul>
                    <li>å½“ç§Ÿèµåˆ©ç‡ä¿æŒåœ¨ <span class="highlight">1%-2%</span>ï¼šå¸‚åœºæµåŠ¨æ€§å……è¶³ï¼Œä»»ä½•ä»·æ ¼æ³¢åŠ¨éƒ½æ˜¯å™ªéŸ³ã€‚</li>
                    <li>å½“ç§Ÿèµåˆ©ç‡è·³å‡è‡³ <span class="highlight">10% ä»¥ä¸Š</span>ï¼šç³»ç»Ÿå‡ºç°â€œå¿ƒç»ç—›â€ï¼ŒæŒ¤å…‘é£é™©çˆ†å‘ã€‚</li>
                    <li>å½“ç§Ÿèµåˆ©ç‡å†²å‘ <span class="highlight">100%-200%</span>ï¼šè¿™æ˜¯ 2025 å¹´ 10 æœˆçš„å·…å³°çŠ¶æ€ï¼Œæ„å‘³ç€ç°è´§å¸‚åœºå®Œå…¨åœæ‘†ï¼Œé“¶ä»·å°†è¿›å…¥å¿…ç„¶æš´æ¶¨é€šé“ã€‚</li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="new-section secret-box">
        <h2>ğŸ’ é“æ˜é“¶è¡Œ (TD Bank) ç›ˆåˆ©ç§˜è¯€æ·±åº¦æ‹†è§£</h2>
        <p>é“æ˜é“¶è¡Œä¹‹æ‰€ä»¥èƒ½åœ¨ 2025 å¹´é£æš´ä¸­å‡†ç¡®é¢„è¨€ï¼Œæ˜¯å› ä¸ºä»–ä»¬æŒæ¡äº†**â€œæ”¯ä»˜å‡†å¤‡é‡‘â€**çš„åŠ¨æ€è§†è§’ã€‚</p>
        
        <div class="formula-card">
            <strong>ç§˜è¯€ 1ï¼šè‡ªç”±ç™½é“¶é‡çš„â€œç©¿é€å¼â€ç®—æ³•</strong><br>
            <code>Free Silver = (Total Inventory - ETF Allocated) Ã— Liquidity Coefficient</code><br>
            <small>é™„ä»¶é€»è¾‘ï¼šLBMA åº“å­˜ä¸­åŒ…å«å¤§é‡å±äº ETF çš„â€œæ­»é“¶å­â€ï¼Œè¿™äº›ä¸èƒ½ç”¨äºäº¤å‰²ã€‚å¿…é¡»æ‰£é™¤ ETF æŒä»“ï¼Œå†ä¹˜ä»¥ç³»æ•°ï¼ˆé€šå¸¸ä¸º 0.4ï¼‰ï¼Œå¾—åˆ°çš„æ‰æ˜¯çœŸæ­£èƒ½åº”å¯¹æŒ¤å…‘çš„â€œæœºåŠ¨åŠ›é‡â€ã€‚</small>
        </div>

        <div class="formula-card">
            <strong>ç§˜è¯€ 2ï¼šå´©ç›˜ä¸´ç•Œç‚¹å…¬å¼</strong><br>
            <code>Squeeze Threshold = Free Silver / Daily Clearing Volume < 0.5</code><br>
            <small>é™„ä»¶é€»è¾‘ï¼šå½“æ—¥å‡æ¸…ç®—é‡ï¼ˆçº¦ 2.7 äº¿ç›å¸ï¼‰æ˜¯å‡†å¤‡é‡‘çš„ä¸¤å€æ—¶ï¼Œåšå¸‚å•†çš„ä¿¡ç”¨é“¾æ¡ä¼šç‰©ç†æ€§æ–­è£‚ã€‚æ­¤æ—¶ï¼Œä»»ä½•æŠ€æœ¯é¢é˜»åŠ›éƒ½æ— æ•ˆï¼Œä»·æ ¼å¿…é¡»é€šè¿‡æš´æ¶¨æ¥å¼ºè¡Œç¼©å‡æ”¯ä»˜éœ€æ±‚ã€‚</small>
        </div>

        <div class="formula-card">
            <strong>ç§˜è¯€ 3ï¼šå¿ƒç»ç—›è§‚å¯Ÿæ³•</strong><br>
            <p>é“æ˜é“¶è¡Œä¸çœ‹â€œä»·æ ¼è·Œäº†æ²¡â€ï¼Œè€Œæ˜¯çœ‹**â€œæº¢ä»·çª—å£â€**ã€‚å¦‚æœä¼¦æ•¦ã€çº½çº¦ã€ä¸Šæµ·ä¸‰ä¸ªå¸‚åœºçš„æº¢ä»·å‡ºç°å‰§çƒˆå·®å¼‚ï¼ˆä¾‹å¦‚ä¼¦æ•¦ç°è´§æ¯”çº½çº¦æœŸè´§é«˜å‡º $3ï¼‰ï¼Œè¿™è¯´æ˜å…¨çƒå®ç‰©ç™½é“¶æ­£åœ¨è¿›è¡Œâ€œè·¨æ´‹å¤§æ¬è¿â€ï¼Œè¿™æ˜¯æŒ¤å…‘é£æš´å³å°†åœ¨å‹åŠ›æœ€å¤§å¤„çˆ†å‘çš„é“è¯ã€‚</p>
        </div>
    </div>

</div>

<script>
let chart;
function initChart() {
    const ctx = document.getElementById('silverChart').getContext('2d');
    chart = new Chart(ctx, {
        type: 'line',
        data: { labels: [], datasets: [{ label: 'å‹åŠ›æ¯” (çˆ†ç‚¹=0.5)', borderColor: '#e74c3c', data: [], yAxisID: 'y' }, { label: 'ç™½é“¶ä»·æ ¼', borderColor: '#3498db', data: [], yAxisID: 'y1' }] },
        options: { responsive: true, maintainAspectRatio: false, scales: { y: { position: 'left', min: 0, max: 2 }, y1: { position: 'right', grid: { drawOnChartArea: false } } } }
    });
}

function runUpdate() {
    const spot = parseFloat(document.getElementById('spot').value);
    const future = parseFloat(document.getElementById('future').value);
    const lease = parseFloat(document.getElementById('lease').value);
    const lbma = parseFloat(document.getElementById('lbma').value);
    const etf = parseFloat(document.getElementById('etf').value);

    const spread = (spot - future).toFixed(2);
    const ratio = (((lbma - etf) * 0.4) / 270).toFixed(2);

    document.getElementById('res-spread').innerText = (spread > 0 ? "+" : "") + spread;
    document.getElementById('pre-spread').innerText = spread > 0 ? "ğŸ“ˆ ç°è´§æº¢ä»· (å¼ºåŠ›çœ‹æ¶¨)" : "ğŸ“‰ è´´æ°´æ¶ˆå¤± (å¹³ç¨³)";
    document.getElementById('pre-spread').style.color = spread > 0 ? "var(--danger)" : "var(--safe)";

    document.getElementById('res-ratio').innerText = ratio;
    if (ratio < 0.5) {
        document.getElementById('pre-ratio').innerText = "ğŸš¨ å´©ç›˜çº§æŒ¤å…‘";
        document.getElementById('pre-ratio').style.color = "var(--danger)";
    } else if (ratio < 1.0) {
        document.getElementById('pre-ratio').innerText = "ğŸŸ¡ å¿ƒç»ç—›é¢„è­¦";
        document.getElementById('pre-ratio').style.color = "var(--warning)";
    } else {
        document.getElementById('pre-ratio').innerText = "ğŸŸ¢ æµåŠ¨æ€§å®‰å…¨";
        document.getElementById('pre-ratio').style.color = "var(--safe)";
    }

    document.getElementById('res-lease-status').innerText = lease + "%";
    document.getElementById('pre-lease').innerText = lease > 5 ? "âš ï¸ é¢„è­¦: ç©ºå¤´å€Ÿè´§éš¾" : "âœ… æ­£å¸¸";
    document.getElementById('pre-lease').style.color = lease > 5 ? "var(--danger)" : "var(--safe)";
}

function importData() {
    const raw = document.getElementById('raw-input').value.trim();
    const rows = raw.split('\n');
    rows.forEach(row => {
        if (row.includes("æ—¥æœŸ")) return;
        const cols = row.split('\t');
        if (cols.length < 5) return;
        const date = cols[0], spot = parseFloat(cols[1]), lease = (parseFloat(cols[3])*100).toFixed(1);
        const ratio = ((((parseFloat(cols[4])/1000000) - (parseFloat(cols[5])/1000000)) * 0.4) / 270).toFixed(2);
        chart.data.labels.push(date);
        chart.data.datasets[0].data.push(ratio);
        chart.data.datasets[1].data.push(spot);
        const tr = `<tr><td>${date}</td><td>$${spot}</td><td>${ratio}</td><td>${lease}%</td><td><span class="status-tag" style="background:${ratio < 0.5 ? 'var(--danger)' : (ratio < 1.0 ? 'var(--warning)' : 'var(--safe)')}">${ratio < 0.5 ? 'çˆ†ç‚¹' : (ratio < 1.0 ? 'é¢„è­¦' : 'æ­£å¸¸')}</span></td></tr>`;
        document.getElementById('history-body').innerHTML = tr + document.getElementById('history-body').innerHTML;
    });
    chart.update();
    alert("å¯¼å…¥æˆåŠŸï¼");
}

window.onload = () => { initChart(); runUpdate(); };
</script>
</body>
</html>